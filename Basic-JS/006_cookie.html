<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ì €ì¥ì†Œ 3ì¢… í…ŒìŠ¤íŠ¸</title>
  </head>
  <body>
    <h1>ì›¹ ì €ì¥ì†Œ ì‹¤ìŠµ</h1>

    <h2>ğŸª ì¿ í‚¤ ê´€ë¦¬ (1ë¶„ ë§Œë£Œ)</h2>
    <p id="cookie-status">ì¿ í‚¤ ìƒíƒœ: ë¡œë”© ì¤‘...</p>
    <button id="setCookieBtn">ì¿ í‚¤ ì„¤ì • (1ë¶„)</button>
    <button id="deleteCookieBtn">ì¿ í‚¤ ì‚­ì œ</button>
    <hr />

    <h2>ğŸ’¾ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ (ì˜êµ¬ í…Œë§ˆ)</h2>
    <p id="local-status">ë¡œì»¬ ìƒíƒœ: ë¡œë”© ì¤‘...</p>
    <button id="setLocalBtn">í…Œë§ˆ ì €ì¥ (dark)</button>
    <button id="deleteLocalBtn">í…Œë§ˆ ì‚­ì œ</button>
    <hr />

    <h2>ğŸ’¬ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ (ì„ì‹œ ì•Œë¦¼)</h2>
    <p id="session-status">ì„¸ì…˜ ìƒíƒœ: ë¡œë”© ì¤‘...</p>
    <button id="setSessionBtn">ì•Œë¦¼ ì €ì¥</button>
    <button id="deleteSessionBtn">ì•Œë¦¼ ì‚­ì œ</button>

    <script>
      // ì—¬ê¸°ì— Vanilla JS ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

      // íŒ: document.cookieëŠ” ê°’ì„ ì„¤ì •í•˜ëŠ” ë¬¸ë²•ì´ ë‹¤ë¥¸ ì €ì¥ì†Œì™€ ë‹¤ë¦…ë‹ˆë‹¤.
      // ë§Œë£Œì¼ ì„¤ì • (Expires): new Date(Date.now() + 60 * 1000).toUTCString()

      // ğŸ“ ê³¼ì œ ìš”êµ¬ ì‚¬í•­
      // ì¿ í‚¤ (Cookie):
      // ì €ì¥: ì‚¬ìš©ì ì´ë¦„ (username='User_A')ì„ ì €ì¥í•˜ê³ , ì´ ì¿ í‚¤ê°€ 1ë¶„ í›„ì— ë§Œë£Œë˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.
      // ì½ê¸°: ì €ì¥ëœ ì‚¬ìš©ì ì´ë¦„ì„ ì½ì–´ #cookie-status ìš”ì†Œì— ì¶œë ¥í•˜ì„¸ìš”.
      // ì‚­ì œ: ë§Œë£Œì¼ì„ ê³¼ê±° ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì¿ í‚¤ë¥¼ ê°•ì œë¡œ ì‚­ì œí•˜ëŠ” ë²„íŠ¼ì„ ë§Œë“œì„¸ìš”.
      function setCookie(name, value, options = {}) {
        options = {
          path: "/",
          expires: new Date(Date.now() + 60 * 1000).toUTCString(), // 1ë¶„ í›„ ë§Œë£Œ
          ...options,
        };

        if (options.expires instanceof Date) {
          options.expires = options.expires.toUTCString();
        }

        let updatedCookie = `${encodeURIComponent(name)}=${encodeURIComponent(
          value
        )}`;

        for (let optionKey in options) {
          updatedCookie += "; " + optionKey;
          let optionValue = options[optionKey];
          if (optionValue !== true) {
            updatedCookie += "=" + optionValue;
          }
        }

        document.cookie = updatedCookie;
      }
      function getCookie(name) {
        let matches = document.cookie.match(
          new RegExp(
            "(?:^|; )" +
              name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") +
              "=([^;]*)"
          )
        );
        return matches ? decodeURIComponent(matches[1]) : undefined;
      }
      const $cookieStatus = document.getElementById("cookie-status");
      const $setCookieBtn = document.getElementById("setCookieBtn");
      const $deleteCookieBtn = document.getElementById("deleteCookieBtn");
      $setCookieBtn.addEventListener("click", () => {
        setCookie("username", "User_A", {
          expires: new Date(Date.now() + 60 * 1000),
        });
        setCookieStatus();
      });
      $deleteCookieBtn.addEventListener("click", () => {
        setCookie("username", "", { expires: -1 });
        setCookieStatus();
      });
      function setCookieStatus() {
        const username = getCookie("username");
        if (username) {
          $cookieStatus.innerHTML = `${username} ë¡œê·¸ì¸`;
        } else {
          $cookieStatus.innerHTML = `ë¡œê·¸ì•„ì›ƒ ìƒíƒœ`;
        }
      }

      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ (LocalStorage):
      // ì €ì¥: ì‚¬ìš©ìê°€ ì„ íƒí•œ ì›¹ì‚¬ì´íŠ¸ì˜ í…Œë§ˆ ì„¤ì • (theme='dark')ì„ ì €ì¥í•˜ëŠ” ë²„íŠ¼ì„ ë§Œë“œì„¸ìš”.
      // ì½ê¸°: í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ í…Œë§ˆ ê°’ì„ ì½ì–´ #local-status ìš”ì†Œì— ì¶œë ¥í•˜ì„¸ìš”. (ì´ ê°’ì€ ë¸Œë¼ìš°ì €ë¥¼ ê»ë‹¤ ì¼œë„ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.)
      // ì‚­ì œ: ì €ì¥ëœ í…Œë§ˆ ì„¤ì •ì„ ì‚­ì œí•˜ëŠ” ë²„íŠ¼ì„ ë§Œë“œì„¸ìš”.
      const $localStatus = document.getElementById("local-status");
      const $setLocalBtn = document.getElementById("setLocalBtn");
      const $deleteLocalBtn = document.getElementById("deleteLocalBtn");
      const $body = document.getElementsByTagName("body")[0];
      $setLocalBtn.addEventListener("click", () => {
        localStorage.setItem("theme", "dark");
        $localStatus.innerHTML = "ğŸŒ™ ë‹¤í¬ í…Œë§ˆ ì ìš© ì¤‘";
        $body.style.backgroundColor = "black";
        $body.style.color = "white";
      });
      $deleteLocalBtn.addEventListener("click", () => {
        localStorage.removeItem("theme");
        $localStatus.innerHTML = "â˜€ï¸ ë¼ì´íŠ¸ í…Œë§ˆ ì ìš© ì¤‘";
        $body.style.backgroundColor = "white";
        $body.style.color = "black";
      });
      // ğŸ’¡ ì´ˆê¸° ë¡œë“œ ì‹œ LocalStorage ê°’ìœ¼ë¡œ ìƒíƒœë¥¼ ë³µì›í•˜ëŠ” í•¨ìˆ˜
      function initializeTheme() {
        const savedTheme = localStorage.getItem("theme");

        if (savedTheme === "dark") {
          // ë‹¤í¬ í…Œë§ˆ ìƒíƒœ ì ìš©
          $localStatus.innerHTML = "ğŸŒ™ ë‹¤í¬ í…Œë§ˆ ì ìš© ì¤‘";
          $body.style.backgroundColor = "black";
          $body.style.color = "white";
        } else {
          // ë¼ì´íŠ¸ í…Œë§ˆ ìƒíƒœ ì ìš©
          $localStatus.innerHTML = "â˜€ï¸ ë¼ì´íŠ¸ í…Œë§ˆ ì ìš© ì¤‘";
          $body.style.backgroundColor = "white";
          $body.style.color = "black";
        }
      }
      // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ì¦‰ì‹œ í˜¸ì¶œ
      initializeTheme();

      // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ (SessionStorage):
      // ì €ì¥: ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ì´ë™í•˜ëŠ” ë™ì•ˆ í‘œì‹œí•  ì¼íšŒì„± ì•Œë¦¼ ë©”ì‹œì§€ (message='ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')ë¥¼ ì €ì¥í•˜ëŠ” ë²„íŠ¼ì„ ë§Œë“œì„¸ìš”.
      // ì½ê¸°: ì €ì¥ëœ ë©”ì‹œì§€ë¥¼ ì½ì–´ #session-status ìš”ì†Œì— ì¶œë ¥í•˜ì„¸ìš”. (ë¸Œë¼ìš°ì € íƒ­ì„ ë‹«ìœ¼ë©´ ì´ ê°’ì´ ì‚¬ë¼ì ¸ì•¼ í•©ë‹ˆë‹¤.)
      // ì‚­ì œ: ì €ì¥ëœ ë©”ì‹œì§€ë¥¼ ì‚­ì œí•˜ëŠ” ë²„íŠ¼ì„ ë§Œë“œì„¸ìš”.
      const $sessiontStatus = document.getElementById("session-status");
      const $setSessionBtn = document.getElementById("setSessionBtn");
      const $deleteSessionBtn = document.getElementById("deleteSessionBtn");
      $setSessionBtn.addEventListener("click", () => {
        sessionStorage.setItem("message", "ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
        const message = sessionStorage.getItem("message");
        alert(message);
        $sessiontStatus.innerHTML = message;
      });
      $deleteSessionBtn.addEventListener("click", () => {
        sessionStorage.removeItem("message");
        $sessiontStatus.innerHTML = "ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.";
      });
      // ğŸ’¡ SessionStorage ì´ˆê¸° ë¡œë“œ ì‹œ ê°’ í™•ì¸
      function initializeSessionStatus() {
        const message = sessionStorage.getItem("message");

        if (message) {
          $sessiontStatus.innerHTML = `ğŸ“¢ ì„ì‹œ ì•Œë¦¼: ${message}`;
          // ë©”ì‹œì§€ë¥¼ ì½ì—ˆìœ¼ë©´ ë‹¤ìŒ í˜ì´ì§€ ì´ë™ ì‹œ ë‹¤ì‹œ í‘œì‹œë˜ì§€ ì•Šë„ë¡ ì‚­ì œí•˜ëŠ” ë¡œì§ë„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          // sessionStorage.removeItem("message");
        } else {
          $sessiontStatus.innerHTML = "ì„¸ì…˜ ìƒíƒœ: ì €ì¥ëœ ì•Œë¦¼ ì—†ìŒ";
        }
      }
      // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ì¦‰ì‹œ í˜¸ì¶œ
      initializeSessionStatus();
    </script>
  </body>
</html>
